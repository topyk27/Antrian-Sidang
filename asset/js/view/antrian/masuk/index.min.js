var suara,myTimeout,msg=new SpeechSynthesisUtterance;function myTimer(){speechSynthesis.pause(),speechSynthesis.resume(),myTimeout=setTimeout(myTimer,1e4)}0==rsvc&&setTimeout((()=>{suara=window.speechSynthesis.getVoices(),msg.voice=suara[11],msg.lang="in-ID",msg.rate=.9}),1e3);var dt_antrian,path=window.location.pathname,namanya=path.split("/"),ruang_sidang=namanya[namanya.length-1];function nama_ruang(a){switch(a){case"ruang sidang i":a="ruang sidang 1";break;case"ruang sidang ii":a="ruang sidang 2";break;case"ruang sidang iii":a="ruang sidang 3";break;case"ruang sidang iv":a="ruang sidang 4";break;case"ruang sidang v":a="ruang sidang 5";break;case"ruang sidang vi":a="ruang sidang 6";break;case"ruang sidang vii":a="ruang sidang 7";break;case"ruang sidang viii":a="ruang sidang 8";break;case"ruang sidang ix":a="ruang sidang 9";break;case"ruang sidang x":a="ruang sidang 10"}return a}function panggil(a,n,e,t,i,s,r){voice="Indonesian Male",rate=1,e=e.split("PA."),t=t.replace("<br />"," "),i=i.replace("<br />"," "),s=nama_ruang(s=s.toLowerCase()),$.ajax({url:base_url+"jadwal/ubah_status",method:"POST",data:{id:a,ruang_sidang_id:r},dataType:"json",beforeSend:function(){$(".loader2").show()},success:function(a){"pc"==panggil_melalui?a&&(i?0!=rsvc?responsiveVoice.speak("Dipanggil nomor antrian "+n+". Nomor perkara "+e[0]+"P,A."+e[1]+". "+t+". Dan "+i+". Silahkan ke "+s,voice,{rate:rate,onstart:function(){$(".loader2").show()},onend:function(){$(".loader2").hide()}}):($(".loader2").show(),myTimeout=setTimeout(myTimer,1e4),msg.text="Dipanggil nomor antrian "+n+". Nomor perkara "+e[0]+"P,A."+e[1]+". "+t+". Dan "+i+". Silahkan ke "+s,msg.onend=function(){clearTimeout(myTimeout),$(".loader2").hide()},speechSynthesis.speak(msg)):0!=rsvc?responsiveVoice.speak("Dipanggil nomor antrian "+n+". Nomor perkara "+e[0]+"P,A."+e[1]+". "+t+". Silahkan ke "+s,voice,{rate:rate,onend:function(){$(".loader2").hide()}}):($(".loader2").show(),myTimeout=setTimeout(myTimer,1e4),msg.text="Dipanggil nomor antrian "+n+". Nomor perkara "+e[0]+"P,A."+e[1]+". "+t+". Silahkan ke "+s,msg.onend=function(){clearTimeout(myTimeout),$(".loader2").hide()},speechSynthesis.speak(msg)),dt_antrian.ajax.reload(null,!1)):insert_panggilan(i?"Dipanggil nomor antrian "+n+". Nomor perkara "+e[0]+"P,A."+e[1]+". "+t+". Dan "+i+". Silahkan ke "+s:"Dipanggil nomor antrian "+n+". Nomor perkara "+e[0]+"P,A."+e[1]+". "+t+". Silahkan ke "+s,n,s)},error:function(a){console.log(a),$(".loader2").hide(),$("#responModalIcon").text("error"),$("#responModalTitle").text("Error"),$("#responModalBody").html("<p>Ada kesalahan, harap refresh halaman</p>"),$("#responModal").modal({backdrop:"static",keyboard:!1}),setTimeout((function(){$("#responModal").modal("hide")}),3e3)}})}function insert_panggilan(a,n,e){$.ajax({url:base_url+"jadwal/insert_panggilan",method:"POST",data:{text:a,no_antrian:n,ruang_sidang:e},dataType:"TEXT",beforeSend:function(){$(".loader2").show()},success:function(a){0!=a&&cek_panggilan(a)},error:function(a){console.log(a),$(".loader2").hide(),$("#responModalIcon").text("error"),$("#responModalTitle").text("Error"),$("#responModalBody").html("<p>Ada kesalahan, harap refresh halaman</p>"),$("#responModal").modal({backdrop:"static",keyboard:!1}),setTimeout((function(){$("#responModal").modal("hide")}),3e3)}})}function cek_panggilan(a){$.ajax({url:base_url+"jadwal/cek_panggilan",method:"POST",data:{id:a,id:a},dataType:"TEXT",beforeSend:function(){$(".loader2").show()},success:function(n){"sudah"==n?$(".loader2").hide():setTimeout((function(){cek_panggilan(a)}),3e3)},error:function(a){console.log(a),$(".loader2").hide(),$("#responModalIcon").text("error"),$("#responModalTitle").text("Error"),$("#responModalBody").html("<p>Ada kesalahan, harap refresh halaman</p>"),$("#responModal").modal({backdrop:"static",keyboard:!1}),setTimeout((function(){$("#responModal").modal("hide")}),3e3)}})}function panggil_saksi(a,n,e,t){voice="Indonesian Male",rate=1,a=a.replace("<br />"," "),n=n.replace("<br />"," "),e=nama_ruang(e=e.toLowerCase()),"pc"==panggil_melalui?n?0!=rsvc?saksiPisah?"skip"==a?responsiveVoice.speak("Dipanggil saksi-saksi dari "+n+". Silahkan ke "+e,voice,{rate:rate,onstart:function(){$(".loader2").show()},onend:function(){$(".loader2").hide()}}):responsiveVoice.speak("Dipanggil saksi-saksi dari "+a+". Silahkan ke "+e,voice,{rate:rate,onstart:function(){$(".loader2").show()},onend:function(){$(".loader2").hide()}}):responsiveVoice.speak("Dipanggil saksi-saksi dari "+a+". Atau "+n+". Silahkan ke "+e,voice,{rate:rate,onstart:function(){$(".loader2").show()},onend:function(){$(".loader2").hide()}}):($(".loader2").show(),myTimeout=setTimeout(myTimer,1e4),saksiPisah?msg.text="skip"==a?"Dipanggil saksi-saksi dari "+n+". Silahkan ke "+e:"Dipanggil saksi-saksi dari "+a+". Silahkan ke "+e:msg.text="Dipanggil saksi-saksi dari "+a+". Atau "+n+". Silahkan ke "+e,msg.onend=function(){clearTimeout(myTimeout),$(".loader2").hide()},speechSynthesis.speak(msg)):0!=rsvc?responsiveVoice.speak("Dipanggil saksi-saksi dari "+a+". Silahkan ke "+e,voice,{rate:rate,onstart:function(){$(".loader2").show()},onend:function(){$(".loader2").hide()}}):($(".loader2").show(),myTimeout=setTimeout(myTimer,1e4),msg.text="Dipanggil saksi-saksi dari "+a+". Silahkan ke "+e,msg.onend=function(){clearTimeout(myTimeout),$(".loader2").hide()},speechSynthesis.speak(msg)):n?saksiPisah?insert_panggilan("skip"==a?"Dipanggil saksi-saksi dari "+n+". Silahkan ke "+e:"Dipanggil saksi-saksi dari "+a+". Silahkan ke "+e,t,e):insert_panggilan("Dipanggil saksi-saksi dari "+a+". Atau "+n+". Silahkan ke "+e,t,e):insert_panggilan("Dipanggil saksi-saksi dari "+a+". Silahkan ke "+e,t,e)}function hapusData(a){$.ajax({url:base_url+"jadwal/hapus",method:"POST",data:{id:a},dataType:"json",beforeSend:function(){$(".loader2").show()},success:function(a){$(".loader2").hide(),a?($("#responModalIcon").text("done"),$("#responModalTitle").text("Berhasil"),$("#responModalBody").html("<p>Data berhasil dihapus</p>")):($("#responModalIcon").text("close"),$("#responModalTitle").text("Gagal"),$("#responModalBody").html("<p>Data gagal dihapus, harap refresh halaman</p>")),dt_antrian.ajax.reload(null,!1),$("#responModal").modal({backdrop:"static",keyboard:!1}),setTimeout((function(){$("#responModal").modal("hide")}),3e3)},error:function(a){console.log(a),$(".loader2").hide(),$("#responModalIcon").text("error"),$("#responModalTitle").text("Error"),$("#responModalBody").html("<p>Ada kesalahan, harap refresh halaman</p>"),$("#responModal").modal({backdrop:"static",keyboard:!1}),setTimeout((function(){$("#responModal").modal("hide")}),3e3)}})}function ubahData(a){var n=$("select[name='ruang_sidang_id']").val();$.ajax({url:base_url+"jadwal/ubah",method:"POST",data:{id:a,ruang_sidang_id:n},dataType:"json",beforeSend:function(){$(".loader2").show()},success:function(a){$(".loader2").hide(),a.success?($("#responModalIcon").text("done"),$("#responModalTitle").text("Berhasil"),$("#responModalBody").html("<p>Data berhasil diubah</p>")):($("#responModalIcon").text("close"),$("#responModalTitle").text("Gagal"),$("#responModalBody").html("<p>Data gagal diubah</p>")),dt_antrian.ajax.reload(null,!1),$("#responModal").modal({backdrop:"static",keyboard:!1}),setTimeout((function(){$("#responModal").modal("hide")}),3e3)},error:function(a){console.log(a),$(".loader2").hide(),$("#responModalIcon").text("error"),$("#responModalTitle").text("Error"),$("#responModalBody").html("<p>Ada kesalahan, harap refresh halaman</p>"),$("#responModal").modal({backdrop:"static",keyboard:!1}),setTimeout((function(){$("#responModal").modal("hide")}),3e3)}})}$(document).ready((function(){dt_antrian=saksiPisah?$("#dt_antrian").DataTable({order:[[2,"asc"]],ajax:{url:base_url+"jadwal/getby/"+ruang_sidang+"/"+jadwal_sidang,dataSrc:"data_jadwal"},columns:[{data:"id"},{data:null,sortable:!1,render:function(a,n,e,t){let i="<a href='#' class='btn btn-secondary panggil_saksiBtnRowT'><i class='fas fa-bullhorn'></i> Saksi Tergugat</a>";return null!=e.tergugat&&"null"!=e.tergugat||(i=""),"<a href='#' class='btn btn-primary mb-2 panggilBtnRow'><i class='fas fa-bullhorn'></i> Pihak</a><br><a href='#' class='btn btn-secondary mb-2 panggil_saksiBtnRowP'><i class='fas fa-bullhorn'></i> Saksi Penggugat</a><br>"}},{data:"no_antrian"},{data:"perkara"},{data:"penggugat"},{data:"tergugat",render:function(a,n,e,t){return null==a||"null"==a?"":a}},{data:"agenda"},{data:"status"},{data:"ruang_sidang_id"},{data:"ruang_sidang"},{data:null,sortable:!1,render:function(a,n,e,t){return"<a href='#' class='btn btn-warning ubahBtnRow'><i class='fas fa-edit'></i>Ubah</a>"}},{data:null,sortable:!1,render:function(a,n,e,t){return"<a href='#' class='btn btn-danger deleteButton'><i class='fas fa-trash'></i>Hapus</a>"}},{data:"pihak_hadir"}],columnDefs:[{targets:[0,7,8,9,12],visible:!1},{responsivePriority:1,targets:[1,2,3]},{targets:[4,5,6],orderable:!1}],createdRow:function(a,n,e){"masuk"==n.status&&$(a).addClass("bg-lime"),"p"==n.pihak_hadir?$("td:eq(3)",$(a)).addClass("bg-primary"):("t"==n.pihak_hadir||$("td:eq(3)",$(a)).addClass("bg-primary"),$("td:eq(4)",$(a)).addClass("bg-primary")),""!=n.tergugat&&$("td:eq(0)",$(a)).append("<a href='#' class='btn btn-warning panggil_saksiBtnRowT'><i class='fas fa-bullhorn'></i> Saksi Tergugat</a>")},responsive:!0,autoWidth:!1}):$("#dt_antrian").DataTable({order:[[2,"asc"]],ajax:{url:base_url+"jadwal/getby/"+ruang_sidang+"/"+jadwal_sidang,dataSrc:"data_jadwal"},columns:[{data:"id"},{data:null,sortable:!1,render:function(a,n,e,t){return"<a href='#' class='btn btn-primary panggilBtnRow'><i class='fas fa-bullhorn'></i> Pihak</a><a href='#' class='btn btn-secondary panggil_saksiBtnRow'><i class='fas fa-bullhorn'></i> Saksi</a>"}},{data:"no_antrian"},{data:"perkara"},{data:"penggugat"},{data:"tergugat",render:function(a,n,e,t){return null==a||"null"==a?"":a}},{data:"agenda"},{data:"status"},{data:"ruang_sidang_id"},{data:"ruang_sidang"},{data:null,sortable:!1,render:function(a,n,e,t){return"<a href='#' class='btn btn-warning ubahBtnRow'><i class='fas fa-edit'></i>Ubah</a>"}},{data:null,sortable:!1,render:function(a,n,e,t){return"<a href='#' class='btn btn-danger deleteButton'><i class='fas fa-trash'></i>Hapus</a>"}},{data:"pihak_hadir"}],columnDefs:[{targets:[0,7,8,9,12],visible:!1},{responsivePriority:1,targets:[1,2,3]},{targets:[4,5,6],orderable:!1}],createdRow:function(a,n,e){"masuk"==n.status&&$(a).addClass("bg-lime"),"p"==n.pihak_hadir?$("td:eq(3)",$(a)).addClass("bg-primary"):("t"==n.pihak_hadir||$("td:eq(3)",$(a)).addClass("bg-primary"),$("td:eq(4)",$(a)).addClass("bg-primary"))},responsive:!0,autoWidth:!1}),setInterval((function(){dt_antrian.ajax.reload(null,!1)}),3e4),$("#dt_antrian tbody").on("click","tr .ubahBtnRow",(function(a){a.preventDefault();var n=$(this).closest("li").length?$(this).closest("li"):$(this).closest("tr"),e=$("#dt_antrian").DataTable().row(n).data();$("#ubahTitle").html("Ubah ruang sidang nomor perkara "+e.perkara),$("select[name='ruang_sidang_id']").val(e.ruang_sidang_id).change(),$("#ubahModal").find("#ubahButton").attr("onclick","ubahData("+e.id+")"),$("#ubahModal").modal({backdrop:"static",keyboard:!1})})),$("#dt_antrian tbody").on("click","tr .deleteButton",(function(a){a.preventDefault();var n=$(this).closest("li").length?$(this).closest("li"):$(this).closest("tr"),e=$("#dt_antrian").DataTable().row(n).data();$("#hapusModal").find(".modal-title").text("Hapus antrian nomor perkara "+e.perkara+"?"),$("#hapusModal").find(".modal-body").html("<p>Nomor perkara akan muncul kembali pada menu ambil antrian untuk pihak</p>"),$("#hapusModal").find("#deleteButton").attr("onclick","hapusData("+e.id+")"),$("#hapusModal").modal({backdrop:"static",keyboard:!1})})),$("#dt_antrian tbody").on("click","tr .panggilBtnRow",(function(a){a.preventDefault();var n=$(this).closest("li").length?$(this).closest("li"):$(this).closest("tr"),e=$("#dt_antrian").DataTable().row(n).data();panggil(e.id,e.no_antrian,e.perkara,e.penggugat,e.tergugat,e.ruang_sidang,e.ruang_sidang_id)})),saksiPisah?($("#dt_antrian tbody").on("click","tr .panggil_saksiBtnRowP",(function(a){a.preventDefault();var n=$(this).closest("li").length?$(this).closest("li"):$(this).closest("tr"),e=$("#dt_antrian").DataTable().row(n).data();panggil_saksi(e.penggugat,"skip",e.ruang_sidang,e.no_antrian)})),$("#dt_antrian tbody").on("click","tr .panggil_saksiBtnRowT",(function(a){a.preventDefault();var n=$(this).closest("li").length?$(this).closest("li"):$(this).closest("tr"),e=$("#dt_antrian").DataTable().row(n).data();panggil_saksi("skip",e.tergugat,e.ruang_sidang,e.no_antrian)}))):$("#dt_antrian tbody").on("click","tr .panggil_saksiBtnRow",(function(a){a.preventDefault();var n=$(this).closest("li").length?$(this).closest("li"):$(this).closest("tr"),e=$("#dt_antrian").DataTable().row(n).data();panggil_saksi(e.penggugat,e.tergugat,e.ruang_sidang,e.no_antrian)})),$("#btn_security").click((function(){voice="Indonesian Male",rate=1,ruang=ruang.toLowerCase(),ruang=nama_ruang(ruang),"pc"==panggil_melalui?0!=rsvc?responsiveVoice.speak(panggilan_security,voice,{rate:rate,onstart:function(){$(".loader2").show()},onend:function(){$(".loader2").hide()}}):($(".loader2").show(),msg.text=panggilan_security,msg.onend=function(a){clearTimeout(myTimeout),$(".loader2").hide()},speechSynthesis.speak(msg)):insert_panggilan(panggilan_security+" ke "+ruang,"security",nama_ruangan)})),$("#btn_buka_sidang").click((function(){voice="Indonesian Male",rate=1,"pc"==panggil_melalui?0!=rsvc?responsiveVoice.speak(panggilan_sidang,voice,{rate:rate,onstart:function(){$(".loader2").show()},onend:function(){$(".loader2").hide()}}):($(".loader2").show(),msg.text=panggilan_sidang,msg.onend=function(a){clearTimeout(myTimeout),$(".loader2").hide()},speechSynthesis.speak(msg)):insert_panggilan(panggilan_sidang,"buka sidang",nama_ruangan)})),$("#btn_pengumuman").click((function(){$("#pengumumanModal").modal({backdrop:"static",keyboard:!1})})),$("#modal_pengumuman").click((function(){voice="Indonesian Male",rate=1,isi=$("#text_pengumuman").val(),"pc"==panggil_melalui?0!=rsvc?responsiveVoice.speak(isi,voice,{rate:rate,onstart:function(){$(".loader2").show()},onend:function(){$(".loader2").hide()}}):($(".loader2").show(),msg.text=isi,msg.onend=function(a){clearTimeout(myTimeout),$(".loader2").hide()},speechSynthesis.speak(msg)):insert_panggilan(isi,"pengumuman",nama_ruangan)}))}));