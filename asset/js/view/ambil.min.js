var dt_antrian;function ambil(a,n,t,r,e,d,i,o){$.ajax({url:base_url+"jadwal/insert_antrian",method:"POST",data:{perkara_id:a,perkara:n,penggugat:t,tergugat:r,jadwal_sidang:e,agenda:d,ruang_sidang_id:i,ruang_sidang:o},dataType:"json",beforeSend:function(){$(".loader2").show()},success:function(a){($(".loader2").hide(),"enable"==printable)?a.success?"ok"==cetak(a.no_antrian,n,e,o)&&(dt_antrian.ajax.reload(),$("#responSimbol").text("done"),$("#modal_title").html("Nomor Antrian "+a.no_antrian+"<br>di "+a.ruang_sidang),$("#modal_body").text("Silahkan menunggu nomor antrian anda dipanggil"),$("#modal_footer").hide(),$("#ambil_modal").modal({backdrop:"static",keyboard:!1}),setTimeout((function(){$("#ambil_modal").modal("hide")}),5e3)):alert("ada kesalahan, harap refresh halaman"):a.success?(dt_antrian.ajax.reload(),$("#responSimbol").text("done"),$("#modal_title").html("Nomor Antrian "+a.no_antrian+"<br>di "+a.ruang_sidang),$("#modal_body").text("Silahkan menunggu nomor antrian anda dipanggil"),$("#modal_footer").hide(),$("#ambil_modal").modal({backdrop:"static",keyboard:!1}),setTimeout((function(){$("#ambil_modal").modal("hide")}),5e3)):alert("ada kesalahan, harap refresh halaman")},error:function(a){$(".loader2").hide(),alert("ada yang salah"),console.log(a)}})}function cetak(a,n,t,r){var e;t=(t=t.split("-"))[2]+"-"+t[1]+"-"+t[0],$.ajax({url:base_url+"jadwal/cetak",data:{no_antrian:a,perkara:n,jadwal:t,ruang:r},method:"JSON",dataType:"TEXT",beforeSend:function(){$(".loader2").show()},success:function(a){return 1==a.success?e="ok":(e="ok",alert("Gagal cetak antrian")),$(".loader2").hide(),e},error:function(a){return console.log(a),$(".loader2").hide(),alert("ada yang salah, harap periksa jaringan"),e}})}$(document).ready((function(){$("#sidebar_ambil_antrian").addClass("active"),dt_antrian=$("#dt_antrian").DataTable({order:[[1,"asc"]],ajax:{url:base_url+"jadwal/ambil_antrian_hari_ini",dataSrc:"data_jadwal"},columns:[{data:"id"},{data:"perkara"},{data:"penggugat"},{data:"tergugat"},{data:"ruang"},{data:"ruang_sidang_id"},{data:"tanggal_sidang"},{data:"agenda"}],columnDefs:[{targets:[0,5,6,7],visible:!1},{responsivePriority:1,targets:[1,2]}],responsive:!0,autoWidth:!1}),$("#dt_antrian tbody").on("click","tr",(function(a){a.preventDefault();var n=$(this).closest("li").length?$(this).closest("li"):$(this).closest("tr"),t=$("#dt_antrian").DataTable().row(n).data();$("#modal_title").html("Ambil antrian"),$("#ambil_modal").modal({backdrop:"static",keyboard:!1}),$("#modal_footer").show(),t.tergugat?$("#ambil_modal").find(".modal-body").html("<p>Ambil antrian nomor perkara "+t.perkara+"<br>Penggugat : "+t.penggugat+"<br>Tergugat : "+t.tergugat):$("#ambil_modal").find(".modal-body").html("<p>Ambil antrian nomor perkara "+t.perkara+"<br>Penggugat : "+t.penggugat),$("#ambil_modal").find("#ambil_button").attr("onclick","ambil("+t.id+",'"+t.perkara+"','"+t.penggugat+"','"+t.tergugat+"','"+t.tanggal_sidang+"','"+t.agenda+"',"+t.ruang_sidang_id+",'"+t.ruang+"')")})),setInterval((function(){dt_antrian.ajax.reload(null,!1)}),3e4)}));